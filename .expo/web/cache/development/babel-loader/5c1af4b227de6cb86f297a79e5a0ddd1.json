{"ast":null,"code":"import firebase from \"firebase\";\nexport var Chats = {\n  addMessage: function addMessage() {\n    return firebase.firestore().collection('MESSAGE_THREADS').doc(\"thread._id\").set({\n      user1: \"asd1\",\n      user2: \"asd2\"\n    }).collection('MESSAGES').add({\n      text: \"sdf\",\n      createdAt: new Date().getTime(),\n      user: {\n        _id: loggedIn.uid,\n        displayName: loggedIn.name\n      }\n    });\n  },\n  startThread: function startThread(user1, user2) {\n    firebase.firestore().collection('MESSAGE_THREADS').add({\n      user1: user1,\n      user2: user2\n    }).then(function (r) {\n      return console.log(r);\n    });\n  },\n  getThread: function getThread(user1, user2) {\n    firebase.firestore().collection('MESSAGE_THREADS').where(\"user1\", \"==\", user1).where(\"user2\", \"==\", user2).get().then(function (snapshot) {\n      if (snapshot.docs.length <= 0) {\n        Chats.startThread(user1, user2);\n      } else {\n        console.log(snapshot.docs[0].data());\n      }\n    });\n  }\n};","map":{"version":3,"sources":["C:/Users/Ali/Desktop/fyp/EXPO/connection/ChatHandler.js"],"names":["firebase","Chats","addMessage","firestore","collection","doc","set","user1","user2","add","text","createdAt","Date","getTime","user","_id","loggedIn","uid","displayName","name","startThread","then","r","console","log","getThread","where","get","snapshot","docs","length","data"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,UAArB;AAEA,OAAO,IAAMC,KAAK,GAAG;AACjBC,EAAAA,UAAU,EAAE,sBAAM;AACd,WAAOF,QAAQ,CAACG,SAAT,GACFC,UADE,CACS,iBADT,EAEFC,GAFE,CAEE,YAFF,EAGFC,GAHE,CAGE;AAACC,MAAAA,KAAK,EAAE,MAAR;AAAgBC,MAAAA,KAAK,EAAE;AAAvB,KAHF,EAIFJ,UAJE,CAIS,UAJT,EAKFK,GALE,CAKE;AACDC,MAAAA,IAAI,EAAE,KADL;AAEDC,MAAAA,SAAS,EAAE,IAAIC,IAAJ,GAAWC,OAAX,EAFV;AAGDC,MAAAA,IAAI,EAAE;AACFC,QAAAA,GAAG,EAAEC,QAAQ,CAACC,GADZ;AAEFC,QAAAA,WAAW,EAAEF,QAAQ,CAACG;AAFpB;AAHL,KALF,CAAP;AAaH,GAfgB;AAgBjBC,EAAAA,WAAW,EAAE,qBAACb,KAAD,EAAQC,KAAR,EAAkB;AAC3BR,IAAAA,QAAQ,CAACG,SAAT,GACKC,UADL,CACgB,iBADhB,EAEKK,GAFL,CAES;AACDF,MAAAA,KAAK,EAAEA,KADN;AAEDC,MAAAA,KAAK,EAAEA;AAFN,KAFT,EAKOa,IALP,CAKY,UAAAC,CAAC;AAAA,aAAIC,OAAO,CAACC,GAAR,CAAYF,CAAZ,CAAJ;AAAA,KALb;AAMH,GAvBgB;AAwBjBG,EAAAA,SAAS,EAAE,mBAAClB,KAAD,EAAQC,KAAR,EAAkB;AACzBR,IAAAA,QAAQ,CAACG,SAAT,GACKC,UADL,CACgB,iBADhB,EAEKsB,KAFL,CAEW,OAFX,EAEoB,IAFpB,EAE0BnB,KAF1B,EAGKmB,KAHL,CAGW,OAHX,EAGoB,IAHpB,EAG0BlB,KAH1B,EAIKmB,GAJL,GAKKN,IALL,CAKU,UAACO,QAAD,EAAc;AAChB,UAAGA,QAAQ,CAACC,IAAT,CAAcC,MAAd,IAAwB,CAA3B,EAA6B;AACzB7B,QAAAA,KAAK,CAACmB,WAAN,CAAkBb,KAAlB,EAAyBC,KAAzB;AACH,OAFD,MAEK;AAEDe,QAAAA,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACC,IAAT,CAAc,CAAd,EAAiBE,IAAjB,EAAZ;AACH;AAEJ,KAbL;AAeH;AAxCgB,CAAd","sourcesContent":["import firebase from \"firebase\";\r\n\r\nexport const Chats = {\r\n    addMessage: () => {\r\n        return firebase.firestore()\r\n            .collection('MESSAGE_THREADS')\r\n            .doc(\"thread._id\")\r\n            .set({user1: \"asd1\", user2: \"asd2\"})\r\n            .collection('MESSAGES')\r\n            .add({\r\n                text: \"sdf\",\r\n                createdAt: new Date().getTime(),\r\n                user: {\r\n                    _id: loggedIn.uid,\r\n                    displayName: loggedIn.name\r\n                }\r\n            })\r\n    },\r\n    startThread: (user1, user2) => {\r\n        firebase.firestore()\r\n            .collection('MESSAGE_THREADS')\r\n            .add({\r\n                user1: user1,\r\n                user2: user2,\r\n            }).then(r => console.log(r))\r\n    },\r\n    getThread: (user1, user2) => {\r\n        firebase.firestore()\r\n            .collection('MESSAGE_THREADS')\r\n            .where(\"user1\", \"==\", user1)\r\n            .where(\"user2\", \"==\", user2)\r\n            .get()\r\n            .then((snapshot) => {\r\n                if(snapshot.docs.length <= 0){\r\n                    Chats.startThread(user1, user2)\r\n                }else{\r\n\r\n                    console.log(snapshot.docs[0].data())\r\n                }\r\n\r\n            });\r\n\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}