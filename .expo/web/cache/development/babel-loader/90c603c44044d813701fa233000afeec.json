{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Ali\\\\Desktop\\\\fyp\\\\EXPO\\\\screens\\\\ProfileScreens\\\\AddNewService.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport * as ImagePicker from 'expo-image-picker';\nimport { Avatar, Button, Input, ListItem, Text, Divider } from \"react-native-elements\";\nimport UserContext from \"../../connection/userContext\";\nimport { Firebase } from \"../../connection/comms\";\nimport { saveData } from \"../../connection/AsyncStorage\";\nimport { Picker } from '@react-native-picker/picker';\nexport default function AddNewService(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation,\n      route = _ref.route;\n\n  var _useContext = useContext(UserContext),\n      loggedIn = _useContext.loggedIn;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      service = _useState2[0],\n      setService = _useState2[1];\n\n  var _useState3 = useState(new Array(5).fill(\"\")),\n      _useState4 = _slicedToArray(_useState3, 2),\n      covers = _useState4[0],\n      setCovers = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isEditing = _useState6[0],\n      setEditing = _useState6[1];\n\n  console.log(route.params);\n  useEffect(function () {\n    (function _callee() {\n      var _await$ImagePicker$re, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(Platform.OS !== 'web')) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(ImagePicker.requestCameraRollPermissionsAsync());\n\n            case 3:\n              _await$ImagePicker$re = _context.sent;\n              status = _await$ImagePicker$re.status;\n\n              if (status !== 'granted') {\n                alert('Sorry, we need camera roll permissions to make this work!');\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n\n    if (route.params.service) {\n      setEditing(true);\n      setService(route.params.service);\n      setCovers(route.params.service.cover);\n      route.name = route.params.title;\n    }\n  }, []);\n  console.log(service);\n\n  var pickImage = function pickImage(index) {\n    var result;\n    return _regeneratorRuntime.async(function pickImage$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              mediaTypes: ImagePicker.MediaTypeOptions.Images,\n              allowsEditing: true,\n              aspect: [1, 1],\n              quality: 0.5\n            }));\n\n          case 2:\n            result = _context2.sent;\n\n            if (!result.cancelled) {\n              Firebase.serviceIMG(result.uri).then(function (link) {\n                console.log(\"link, >>\", link);\n                covers[index] = link;\n                setCovers(covers);\n                setService(function (previousState) {\n                  return _objectSpread(_objectSpread({}, previousState), {}, {\n                    cover: covers\n                  });\n                });\n              });\n            }\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(UserContext.Consumer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, function (_ref2) {\n    var loggedIn = _ref2.loggedIn,\n        setLoggedin = _ref2.setLoggedin;\n    return React.createElement(KeyboardAvoidingView, {\n      behavior: Platform.OS === \"ios\" ? \"padding\" : \"padding\",\n      style: styles.container,\n      keyboardVerticalOffset: 100,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      style: {\n        fontSize: 25,\n        fontWeight: \"bold\",\n        paddingHorizontal: 20,\n        marginTop: 10\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }\n    }, route.name), React.createElement(ScrollView, {\n      style: styles.container,\n      contentContainerStyle: styles.contentContainer,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }\n    }, React.createElement(View, {\n      style: {\n        marginBottom: 20,\n        display: \"flex\",\n        justifyContent: \"center\",\n        flexDirection: \"row\",\n        flexWrap: \"wrap\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 25\n      }\n    }, covers.map(function (cover, key) {\n      return React.createElement(Avatar, {\n        source: {\n          uri: covers[key]\n        },\n        size: \"medium\",\n        containerStyle: {\n          marginHorizontal: 10\n        },\n        title: key + 1,\n        showEditButton: true,\n        onEditPress: function onEditPress() {\n          return pickImage(key);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 33\n        }\n      });\n    })), React.createElement(Picker, {\n      selectedValue: service.category,\n      onValueChange: function onValueChange(itemValue, itemIndex) {\n        setService(function (previousState) {\n          return _objectSpread(_objectSpread({}, previousState), {}, {\n            category: itemValue\n          });\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }\n    }, React.createElement(Picker.Item, {\n      label: \"Select Category\",\n      value: \"none\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 29\n      }\n    }), React.createElement(Picker.Item, {\n      label: \"Embroidery\",\n      value: \"Embroidery\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 29\n      }\n    }), React.createElement(Picker.Item, {\n      label: \"Stitching\",\n      value: \"Stitching\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 29\n      }\n    }), React.createElement(Picker.Item, {\n      label: \"Alteration\",\n      value: \"Alteration\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 29\n      }\n    }), React.createElement(Picker.Item, {\n      label: \"Designing\",\n      value: \"Designing\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 29\n      }\n    }), React.createElement(Picker.Item, {\n      label: \"Cut Work\",\n      value: \"CutWork\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 29\n      }\n    })), React.createElement(ListItem, {\n      topDivider: true,\n      title: \"I will...\",\n      input: {\n        placeholder: 'do the task',\n        defaultValue: service.title,\n        onChangeText: function onChangeText(text) {\n          setService(function (previousState) {\n            return _objectSpread(_objectSpread({}, previousState), {}, {\n              title: text\n            });\n          });\n        }\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 25\n      }\n    }), React.createElement(ListItem, {\n      topDivider: true,\n      title: \"Starting at only, Rs: \",\n      input: {\n        placeholder: 'Rs: 5000',\n        defaultValue: service.price,\n        onChangeText: function onChangeText(text) {\n          setService(function (previousState) {\n            return _objectSpread(_objectSpread({}, previousState), {}, {\n              price: text\n            });\n          });\n        }\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 25\n      }\n    }), React.createElement(ListItem, {\n      topDivider: true,\n      title: \"and in only...\",\n      input: {\n        placeholder: '3 days',\n        defaultValue: service.time,\n        onChangeText: function onChangeText(text) {\n          setService(function (previousState) {\n            return _objectSpread(_objectSpread({}, previousState), {}, {\n              time: text\n            });\n          });\n        }\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 25\n      }\n    }), React.createElement(ListItem, {\n      topDivider: true,\n      title: \"Here are the details\",\n      input: {\n        multiline: true,\n        placeholder: 'My service in detail...',\n        defaultValue: service.details,\n        style: {\n          height: \"100%\"\n        },\n        containerStyle: {\n          height: 100\n        },\n        onChangeText: function onChangeText(text) {\n          setService(function (previousState) {\n            return _objectSpread(_objectSpread({}, previousState), {}, {\n              details: text\n            });\n          });\n        }\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 25\n      }\n    }), isEditing ? React.createElement(Button, {\n      type: \"outline\",\n      title: \"Update Service\",\n      buttonStyle: {\n        borderColor: \"#ef3caf\",\n        borderRadius: 20\n      },\n      titleStyle: {\n        color: \"#ef3caf\"\n      },\n      onPress: function onPress() {\n        if (!service.title || service.title.length < 10) {\n          alert(\"Please add appropriate title.\");\n        } else if (!service.price || service.price.length < 2) {\n          alert(\"Please add appropriate price. Minimum price is 99 Rupees.\");\n        } else if (!service.details || service.details.length < 30) {\n          alert(\"Please explain your service in details. Min. 30 chars.\");\n        } else if (covers[0] !== \"\") {\n          Firebase.updateService(service).then(function (r) {\n            alert(\"Updated Service\");\n            navigation.navigate(\"Services\", {\n              reload: true\n            });\n          });\n        } else {\n          alert(\"Please add at least first image for service.\");\n        }\n      },\n      style: {\n        marginTop: 20,\n        marginHorizontal: 20\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 38\n      }\n    }) : React.createElement(Button, {\n      type: \"outline\",\n      title: \"Add Service\",\n      buttonStyle: {\n        borderColor: \"#ef3caf\",\n        borderRadius: 20\n      },\n      titleStyle: {\n        color: \"#ef3caf\"\n      },\n      onPress: function onPress() {\n        if (!service.title || service.title.length < 10) {\n          alert(\"Please add appropriate title.\");\n        } else if (!service.price || service.price.length < 2) {\n          alert(\"Please add appropriate price. Minimum price is 99 Rupees.\");\n        } else if (!service.details || service.details.length < 30) {\n          alert(\"Please explain your service in details. Min. 30 chars.\");\n        } else if (covers[0] !== \"\") {\n          Firebase.addNewService(service, loggedIn.uid).then(function (r) {\n            if (r) {\n              navigation.navigate(\"Services\", {\n                reload: true\n              });\n            }\n          });\n        } else {\n          alert(\"Please add at least first image for service.\");\n        }\n      },\n      style: {\n        marginTop: 20,\n        marginHorizontal: 20\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 29\n      }\n    })));\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff'\n  },\n  contentContainer: {\n    paddingTop: 30,\n    paddingBottom: 20\n  }\n});","map":{"version":3,"sources":["C:/Users/Ali/Desktop/fyp/EXPO/screens/ProfileScreens/AddNewService.js"],"names":["React","useContext","useEffect","useState","ImagePicker","Avatar","Button","Input","ListItem","Text","Divider","UserContext","Firebase","saveData","Picker","AddNewService","navigation","route","loggedIn","service","setService","Array","fill","covers","setCovers","isEditing","setEditing","console","log","params","Platform","OS","requestCameraRollPermissionsAsync","status","alert","cover","name","title","pickImage","index","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","Images","allowsEditing","aspect","quality","result","cancelled","serviceIMG","uri","then","link","previousState","setLoggedin","styles","container","fontSize","fontWeight","paddingHorizontal","marginTop","contentContainer","marginBottom","display","justifyContent","flexDirection","flexWrap","map","key","marginHorizontal","category","itemValue","itemIndex","placeholder","defaultValue","onChangeText","text","price","time","multiline","details","style","height","containerStyle","borderColor","borderRadius","color","length","updateService","r","navigate","reload","addNewService","uid","StyleSheet","create","flex","backgroundColor","paddingTop","paddingBottom"],"mappings":"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","sourcesContent":["import React, {useContext, useEffect, useState} from 'react';\nimport {KeyboardAvoidingView, ScrollView, StyleSheet, View, Platform, TextInput,} from 'react-native';\nimport * as ImagePicker from 'expo-image-picker';\nimport {Avatar, Button, Input, ListItem, Text, Divider} from \"react-native-elements\";\nimport UserContext from \"../../connection/userContext\";\nimport {Firebase} from \"../../connection/comms\";\nimport {saveData} from \"../../connection/AsyncStorage\";\nimport {Picker} from '@react-native-picker/picker';\n\n\nexport default function AddNewService({navigation, route}) {\n    const {loggedIn} = useContext(UserContext)\n    const [service, setService] = useState({})\n    const [covers, setCovers] = useState(new Array(5).fill(\"\"))\n    const [isEditing, setEditing] = useState(false)\n\n    console.log(route.params)\n\n    useEffect(() => {\n        //Image Permissions\n        (async () => {\n            if (Platform.OS !== 'web') {\n                const {status} = await ImagePicker.requestCameraRollPermissionsAsync();\n                if (status !== 'granted') {\n                    alert('Sorry, we need camera roll permissions to make this work!');\n                }\n            }\n        })();\n        if (route.params.service) {\n            setEditing(true)\n            setService(route.params.service)\n            setCovers(route.params.service.cover)\n            route.name = route.params.title\n        }\n    }, [])\n\n    console.log(service)\n\n    const pickImage = async (index) => {\n        let result = await ImagePicker.launchImageLibraryAsync({\n            mediaTypes: ImagePicker.MediaTypeOptions.Images,\n            allowsEditing: true,\n            aspect: [1, 1],\n            quality: 0.5,\n        });\n        if (!result.cancelled) {\n            Firebase.serviceIMG(result.uri)\n                .then(link => {\n                    console.log(\"link, >>\", link)\n                    covers[index] = link\n                    setCovers(covers);\n                    setService(previousState => ({...previousState, cover: covers}));\n                })\n\n        }\n    };\n\n    return (\n        <UserContext.Consumer>\n            {({loggedIn, setLoggedin}) => (\n                <KeyboardAvoidingView behavior={Platform.OS === \"ios\" ? \"padding\" : \"padding\"}\n                                      style={styles.container} keyboardVerticalOffset={100}>\n                    <Text style={{\n                        fontSize: 25,\n                        fontWeight: \"bold\",\n                        paddingHorizontal: 20,\n                        marginTop: 10\n                    }}>{route.name}</Text>\n                    <ScrollView style={styles.container} contentContainerStyle={styles.contentContainer}>\n                        <View style={{\n                            marginBottom: 20,\n                            display: \"flex\",\n                            justifyContent: \"center\",\n                            flexDirection: \"row\",\n                            flexWrap: \"wrap\"\n                        }}>\n\n                            {covers.map((cover, key) => (\n                                <Avatar source={{uri: covers[key]}} size={\"medium\"}\n                                        containerStyle={{marginHorizontal: 10,}}\n                                        title={key + 1} showEditButton={true}\n                                        onEditPress={() => pickImage(key)}/>\n                            ))}\n\n                        </View>\n                        <Picker\n                            selectedValue={service.category}\n                            onValueChange={(itemValue, itemIndex) => {\n                                setService(previousState => ({...previousState, category: itemValue}))\n                            }\n                            }>\n                            <Picker.Item label=\"Select Category\" value=\"none\"/>\n                            <Picker.Item label=\"Embroidery\" value=\"Embroidery\"/>\n                            <Picker.Item label=\"Stitching\" value=\"Stitching\"/>\n                            <Picker.Item label=\"Alteration\" value=\"Alteration\"/>\n                            <Picker.Item label=\"Designing\" value=\"Designing\"/>\n                            <Picker.Item label=\"Cut Work\" value=\"CutWork\"/>\n                        </Picker>\n                        <ListItem\n                            topDivider\n                            title=\"I will...\"\n                            input={{\n                                placeholder: 'do the task',\n                                defaultValue: service.title,\n                                onChangeText: (text) => {\n                                    setService(previousState => ({...previousState, title: text}));\n                                }\n                            }}\n                        />\n\n                        <ListItem\n                            topDivider\n                            title=\"Starting at only, Rs: \"\n                            input={{\n                                placeholder: 'Rs: 5000',\n                                defaultValue: service.price,\n                                onChangeText: (text) => {\n                                    setService(previousState => ({...previousState, price: text}));\n                                }\n                            }}\n                        />\n                        <ListItem\n                            topDivider\n                            title=\"and in only...\"\n                            input={{\n                                placeholder: '3 days',\n                                defaultValue: service.time,\n                                onChangeText: (text) => {\n                                    setService(previousState => ({...previousState, time: text}));\n                                }\n                            }}\n                        />\n                        <ListItem\n                            topDivider\n                            title=\"Here are the details\"\n                            input={{\n                                multiline: true,\n                                placeholder: 'My service in detail...',\n                                defaultValue: service.details,\n                                style: {height: \"100%\"},\n                                containerStyle: {height: 100},\n                                onChangeText: (text) => {\n                                    setService(previousState => ({...previousState, details: text}));\n                                }\n                            }}\n                        />\n\n                        {isEditing ? <Button\n                                type={\"outline\"}\n                                title={\"Update Service\"}\n                                buttonStyle={{borderColor: \"#ef3caf\", borderRadius: 20}}\n                                titleStyle={{color: \"#ef3caf\"}}\n                                onPress={function () {\n                                    if (!service.title || service.title.length < 10) {\n                                        alert(\"Please add appropriate title.\")\n                                    } else if (!service.price || service.price.length < 2) {\n                                        alert(\"Please add appropriate price. Minimum price is 99 Rupees.\")\n                                    } else if (!service.details || service.details.length < 30) {\n                                        alert(\"Please explain your service in details. Min. 30 chars.\")\n                                    } else if (covers[0] !== \"\") {\n                                        Firebase.updateService(service).then(r => {\n                                            alert(\"Updated Service\")\n                                            navigation.navigate(\"Services\", {reload: true})\n                                        })\n                                    } else {\n                                        alert(\"Please add at least first image for service.\")\n                                    }\n\n                                }}\n                                style={{marginTop: 20, marginHorizontal: 20}}\n                            /> :\n                            <Button\n                                type={\"outline\"}\n                                title={\"Add Service\"}\n                                buttonStyle={{borderColor: \"#ef3caf\", borderRadius: 20}}\n                                titleStyle={{color: \"#ef3caf\"}}\n                                onPress={function () {\n                                    if (!service.title || service.title.length < 10) {\n                                        alert(\"Please add appropriate title.\")\n                                    } else if (!service.price || service.price.length < 2) {\n                                        alert(\"Please add appropriate price. Minimum price is 99 Rupees.\")\n                                    } else if (!service.details || service.details.length < 30) {\n                                        alert(\"Please explain your service in details. Min. 30 chars.\")\n                                    } else if (covers[0] !== \"\") {\n                                        Firebase.addNewService(service, loggedIn.uid).then(r => {\n                                            if (r) {\n                                                navigation.navigate(\"Services\", {reload: true})\n                                            }\n                                        })\n                                    } else {\n                                        alert(\"Please add at least first image for service.\")\n                                    }\n\n                                }}\n                                style={{marginTop: 20, marginHorizontal: 20}}\n                            />}\n\n\n                    </ScrollView>\n                </KeyboardAvoidingView>\n\n            )}\n        </UserContext.Consumer>\n    );\n}\n\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: '#fff',\n    },\n\n    contentContainer: {\n        paddingTop: 30,\n        paddingBottom: 20\n    },\n\n});"]},"metadata":{},"sourceType":"module"}